<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Meal Planner</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script th:src="@{'/js/plan-info.js'}"></script>
</head>
<body>
<nav>
    <div>
        <a th:href="@{/home/user}">Home</a>
        <div>
            <ul>
                <li>
                    <a th:href="@{/logout}">Logout</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<br /><br />
<div>
    <div>
        <h1> Plan Generator </h1>
        <p th:text="${plan}"></p>
    </div>
</div>
<div>
    <div th:if="${param.error}">
        <div>Invalid Email or Password</div>
    </div>
    <div th:if="${param.logout}">
        <div> You have been logged out.</div>
    </div>
    <div>
        <form method="post" th:action="@{/plan/info}" th:object="${info}">
            <div>
                <h2>Preferencje:</h2>
                <div>
                    <label>Ilość porcji</label>
                    <input type="number" min="1" id="portions" name="portions" placeholder="Ilość porcji" th:field="*{preferences.numberOfPortions}"/>
                </div>
                <div>
                    <label>Rodzaj diety</label>
                    <input type="text" id="diet" name="diet" class="form-control" placeholder="Rodzaj diety" th:field="*{preferences.diet}"/>
                </div>
                <div>
                    <label>Posiadane produkty do wykorzystania</label>
                    <div th:each="productsU, idU : *{preferences.productsToUse}">
                        <div class="productsU" id="productU-__${idU.index}__">
                            <input type="text" th:field="*{preferences.productsToUse[__${idU.index}__].name}" placeholder="Name">
                            <input type="number" min="0" th:field="*{preferences.productsToUse[__${idU.index}__].amount}" placeholder="Amount">
                            <input type="text" th:field="*{preferences.productsToUse[__${idU.index}__].unit}" placeholder="Unit">
                        </div>
                    </div>
                    <button type="button" class="add-productU">Dodaj kolejny składnik</button>
                </div>

                <div>
                    <label>Nielubiane produkty</label>
                    <div th:each="productsD, idD : *{preferences.dislikedProducts}">
                        <div class="productsD" id="productD-__${idU.index}__">
                            <input type="text" th:field="*{preferences.dislikedProducts[__${idD.index}__].name}" placeholder="Name">
                        </div>
                    </div>
                    <button type="button" class="add-productD">Dodaj kolejny składnik</button>
                </div>
            </div>
            <br><br>
            <div>
                <h2>WeekInfo:</h2>
                <!--                        <div>-->
                <!--                            <label>WeekInfo</label>-->
                <!--                            <select id="eatingStatus" name="selectedStatus" th:field="*{weekInfo.dayInfoList[0].eatingPlan.status}">-->
                <!--                                <option th:each="s : ${eatingStatuses}" th:value="${s}" th:text="${s}"></option>-->
                <!--                            </select>-->
                <!--                            <div>-->
                <!--                                <input type="text" id="day" th:field="*{weekInfo.dayInfoList[0].day}" placeholder="Dzień"/>-->
                <!--                                <input type="text" id="amount" th:field="*{weekInfo.dayInfoList[0].eatingPlan}" placeholder="Ilość"/>-->
                <!--                                <input type="text" id="unit" th:field="*{preferences.productsToUse[0].unit}" placeholder="Jednostka"/>-->
                <!--                            </div>-->
                <!--                        </div>-->
            </div>
            <div>
                <button type="submit">Zatwierdź</button>
            </div>
        </form>
    </div>
</div>
</body>
</html>
